<?php
/**
 * @file
 * Code for the Ktopic feature.
 */

include_once 'ktopic.features.inc';

include_once 'ktopic.field.inc';

/**
 * Return list of ktopic type options.
 *
 * @todo This use field ui to set field_ktopic_type 'allowed_values', consider
 * improving this by create a settings form to do it and this function use
 * variable_get_value('ktopic_type_options') to return the options list.
 */
function ktopic_type_options() {
  $field_ktopic_type_info = field_info_field('field_ktopic_type');

  return $field_ktopic_type_info['settings']['allowed_values'];
}

/**
 * Load ktopic entity, node.
 */
function ktopic_load($name) {
  $conds[] = array(
    'column' => 'machine',
    'value' => $name,
    'operator' => '=',
  );
  $ids = KtoolsEntityField::queryEntities(KTOPIC_FIELD_NAME, $conds, 'node');

  return node_load(reset($ids));
}
